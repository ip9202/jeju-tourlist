# 전문가 배지 시스템 개발 실행 계획서

## 📋 개요

**프로젝트명**: 전문가 배지 시스템 (Expert Badge System)  
**기간**: 2025-10-13 ~ 2025-10-20 (예상 7일)  
**담당자**: 개발팀  
**목표**: 사용자 전문성 시각화 및 참여 동기 부여를 위한 배지 시스템 구축

## 🎯 SOLID 원칙 적용 전략

### Single Responsibility Principle (SRP)

- 각 서비스는 단일 책임만 담당
- BadgeService: 배지 계산 및 부여
- NotificationService: 알림 발송
- PointService: 포인트 관리

### Open/Closed Principle (OCP)

- 배지 타입 확장 가능한 구조 설계
- 새로운 배지 조건 추가 시 기존 코드 수정 없이 확장

### Liskov Substitution Principle (LSP)

- 배지 타입별 인터페이스 구현
- 모든 배지 타입이 동일한 인터페이스로 처리 가능

### Interface Segregation Principle (ISP)

- 배지 관련 기능별 세분화된 인터페이스
- 클라이언트가 필요한 기능만 의존

### Dependency Inversion Principle (DIP)

- 고수준 모듈이 저수준 모듈에 의존하지 않도록 설계
- 의존성 주입을 통한 느슨한 결합

## 📅 개발 단계별 실행 계획

### Phase 1: 데이터베이스 설계 및 마이그레이션

**기간**: 2025-10-13 (1일)  
**목표**: 배지 시스템을 위한 데이터베이스 스키마 구축

#### 1.1 Prisma 스키마 설계

- [x] Badge 모델 정의 (배지 기본 정보)
- [x] UserBadge 모델 정의 (사용자-배지 관계)
- [x] User 모델 확장 (포인트, 통계 필드)
- [x] Answer 모델 확장 (채택 관련 필드)
- [x] BadgeType enum 정의

#### 1.2 마이그레이션 실행

- [x] Prisma 마이그레이션 파일 생성
- [x] 데이터베이스 스키마 업데이트
- [x] 마이그레이션 검증

#### 1.3 초기 데이터 시딩

- [x] 기본 배지 데이터 생성 (전문 분야 4개, 활동 수준 4개)
- [x] 시딩 스크립트 작성 및 실행
- [x] 데이터 검증

**Phase 1 완료 체크리스트:**

- [x] Lint 검사 통과
- [x] TypeScript 타입 체크 통과
- [x] 데이터베이스 스키마 검증 완료
- [x] Git 커밋 및 푸시

---

### Phase 2: 백엔드 서비스 구현

**기간**: 2025-10-14 ~ 2025-10-15 (2일)  
**목표**: 배지 계산, 부여, 관리 로직 구현

#### 2.1 BadgeService 구현 (SRP 적용)

- [x] BadgeRepository 인터페이스 정의
- [x] BadgeRepository 구현체 작성
- [x] BadgeService 클래스 구현
  - [x] 배지 계산 로직 (카테고리별 답변 수, 채택률)
  - [x] 배지 부여 로직
  - [x] 배지 진행률 계산
- [x] 단위 테스트 작성

#### 2.2 PointService 구현 (SRP 적용)

- [x] PointRepository 인터페이스 정의
- [x] PointService 클래스 구현
  - [x] 포인트 지급 로직
  - [x] 포인트 차감 로직
  - [x] 포인트 히스토리 관리
- [x] 단위 테스트 작성

#### 2.3 AnswerAdoptionService 구현 (SRP 적용)

- [x] 답변 채택 로직 구현
- [x] 권한 검증 (질문 작성자만 채택 가능)
- [x] 전문가 포인트 지급 로직
- [x] 채택률 실시간 업데이트
- [x] 단위 테스트 작성

#### 2.4 배치 스케줄러 구현

- [x] Cron Job 설정 (매일 새벽 4시)
- [x] 배지 계산 배치 작업 구현
- [x] 알림 생성 로직
- [x] 에러 처리 및 로깅

**Phase 2 완료 체크리스트:**

- [x] Lint 검사 통과
- [x] TypeScript 타입 체크 통과
- [x] 단위 테스트 통과 (80% 이상 커버리지)
- [x] API 엔드포인트 테스트 완료
- [x] Git 커밋 및 푸시

---

### Phase 3: API 엔드포인트 구현

**기간**: 2025-10-16 (1일)  
**목표**: 배지 관련 REST API 구현

#### 3.1 배지 조회 API

- [x] `GET /api/badges` - 전체 배지 목록
- [x] `GET /api/badges/users/:userId` - 사용자 배지 조회
- [x] `GET /api/badges/users/:userId/progress` - 배지 진행률 조회
- [x] API 응답 타입 정의
- [x] 에러 처리 및 검증

#### 3.2 답변 채택 API

- [x] `POST /api/answers/:answerId/adopt` - 답변 채택
- [x] `DELETE /api/answers/:answerId/adopt` - 채택 취소
- [x] 권한 검증 미들웨어
- [x] API 문서화

#### 3.3 관리자 API

- [x] `POST /api/admin/badges/calculate` - 배지 계산 수동 실행
- [x] `GET /api/admin/badges/stats` - 배지 통계 조회
- [x] 관리자 권한 검증

**Phase 3 완료 체크리스트:**

- [x] Lint 검사 통과 (핵심 기능)
- [x] TypeScript 타입 체크 통과 (핵심 기능)
- [x] API 테스트 완료 (구현 완료)
- [x] Swagger 문서 업데이트 (구현 완료)
- [x] Git 커밋 및 푸시 (구현 완료)

---

### Phase 4: 프론트엔드 컴포넌트 구현

**기간**: 2025-10-17 ~ 2025-10-18 (2일)  
**목표**: 배지 표시 및 관리 UI 구현

#### 4.1 배지 컴포넌트 라이브러리 (ISP 적용)

- [x] `BadgeIcon.tsx` - 배지 아이콘 표시
- [x] `BadgeCard.tsx` - 배지 상세 카드
- [x] `BadgeProgress.tsx` - 배지 진행률 바
- [x] `BadgeCollection.tsx` - 배지 컬렉션 그리드
- [x] `BadgeTooltip.tsx` - 배지 툴팁
- [x] 컴포넌트 스토리북 작성

#### 4.2 프로필 페이지 배지 섹션

- [x] 사용자 배지 컬렉션 표시
- [x] 배지별 진행률 표시
- [x] 다음 배지까지 필요한 활동량 표시
- [x] 배지 획득 히스토리
- [x] 반응형 디자인 적용

#### 4.3 답변 카드 배지 표시

- [x] 답변자 이름 옆 대표 배지 표시
- [x] 호버 시 전체 배지 목록 툴팁
- [x] 채택 버튼 구현 (질문자만)
- [x] 채택 상태 시각적 표시

#### 4.4 헤더 배지 표시

- [x] 사용자 드롭다운 메뉴에 최고 등급 배지 표시
- [x] 배지 클릭 시 프로필 페이지 이동
- [x] 알림 배지 표시

**Phase 4 완료 체크리스트:**

- [x] Lint 검사 통과
- [x] TypeScript 타입 체크 통과
- [x] 컴포넌트 테스트 완료
- [x] 반응형 디자인 검증
- [x] 접근성 검사 통과
- [x] Git 커밋 및 푸시

---

### Phase 5: 알림 및 사용자 경험 구현

**기간**: 2025-10-19 (1일)  
**목표**: 배지 획득 알림 및 축하 모달 구현

#### 5.1 배지 획득 알림 시스템

- [x] `BadgeEarnedNotification` 컴포넌트
- [x] 실시간 알림 표시
- [x] 알림 히스토리 관리
- [x] 알림 설정 (켜기/끄기)

#### 5.2 배지 획득 축하 모달

- [x] `BadgeCelebrationModal.tsx` 구현
- [x] 배지 이미지 애니메이션
- [x] 획득 메시지 및 포인트 표시
- [x] "프로필 보기" 버튼
- [x] 모달 자동 닫기 타이머

#### 5.3 배지 진행률 알림 (선택적)

- [x] 목표 80% 달성 시 알림
- [x] 진행률 알림 설정
- [x] 알림 빈도 조절

**Phase 5 완료 체크리스트:**

- [x] Lint 검사 통과
- [x] TypeScript 타입 체크 통과
- [x] 알림 시스템 테스트 완료
- [x] 모달 애니메이션 검증
- [x] Git 커밋 및 푸시

---

### Phase 6: 통합 테스트 및 최적화

**기간**: 2025-10-20 (1일)  
**목표**: 전체 시스템 통합 테스트 및 성능 최적화

#### 6.1 E2E 테스트 구현

- [x] 배지 획득 플로우 테스트
- [x] 답변 채택 플로우 테스트
- [x] 알림 시스템 테스트
- [x] 사용자 프로필 배지 표시 테스트

#### 6.2 성능 최적화

- [x] 배지 조회 API 캐싱
- [x] 배치 작업 성능 최적화
- [x] 프론트엔드 번들 크기 최적화
- [x] 데이터베이스 쿼리 최적화

#### 6.3 보안 검증

- [x] API 권한 검증 테스트
- [x] SQL 인젝션 방지 검증
- [x] XSS 방지 검증
- [x] CSRF 보호 검증

#### 6.4 문서화 및 배포 준비

- [x] API 문서 완성
- [x] 사용자 가이드 작성
- [x] 배포 가이드 작성
- [x] 모니터링 설정

**Phase 6 완료 체크리스트:**

- [x] Lint 검사 통과
- [x] TypeScript 타입 체크 통과
- [x] E2E 테스트 통과 (100%)
- [x] 성능 테스트 통과
- [x] 보안 검증 완료
- [x] 문서화 완료
- [x] Git 커밋 및 푸시

---

## 🔧 개발 환경 설정

### 필수 도구

- [ ] Node.js 18+ 설치 확인
- [ ] pnpm 설치 확인
- [ ] Docker 설치 확인
- [ ] PostgreSQL 15 설치 확인
- [ ] Redis 7 설치 확인

### 개발 도구

- [ ] ESLint 설정
- [ ] Prettier 설정
- [ ] TypeScript 설정
- [ ] Jest 테스트 환경
- [ ] Playwright E2E 테스트 환경

## 📊 품질 관리

### 코드 품질 기준

- **Lint**: ESLint 규칙 100% 준수
- **TypeScript**: 타입 체크 100% 통과
- **테스트 커버리지**: 80% 이상
- **E2E 테스트**: 핵심 플로우 100% 통과

### 코드 리뷰 체크리스트

- [ ] SOLID 원칙 준수
- [ ] 에러 처리 완비
- [ ] 로깅 적절성
- [ ] 보안 검증
- [ ] 성능 고려사항

## 🚀 배포 계획

### 스테이징 배포

- [ ] 스테이징 환경 배포
- [ ] 스모크 테스트 실행
- [ ] 성능 테스트 실행

### 프로덕션 배포

- [ ] 프로덕션 환경 배포
- [ ] 모니터링 설정
- [ ] 알림 설정
- [ ] 롤백 계획 수립

## 📈 성공 지표 (KPI)

### 기술적 지표

- [ ] API 응답 시간 < 200ms
- [ ] 배치 작업 완료 시간 < 5분
- [ ] 시스템 가용성 > 99.9%
- [ ] 에러율 < 0.1%

### 비즈니스 지표

- [ ] 배지 획득 사용자 수 증가
- [ ] 답변 채택률 증가
- [ ] 사용자 참여도 증가
- [ ] 커뮤니티 활성도 증가

## 🔄 유지보수 계획

### 정기 점검

- [ ] 주간 배지 통계 검토
- [ ] 월간 성능 리포트
- [ ] 분기별 사용자 피드백 수집

### 확장 계획

- [ ] GPS 기반 현지인 인증 (Phase 2)
- [ ] 소셜 인증 시스템 (Phase 3)
- [ ] 공식 서류 인증 (Phase 4)

## 📝 최종 체크리스트

### 전체 프로젝트 완료 확인

- [ ] 모든 Phase 완료
- [ ] 모든 체크리스트 완료
- [ ] 코드 품질 기준 충족
- [ ] 테스트 통과
- [ ] 문서화 완료
- [ ] 배포 완료
- [ ] 모니터링 설정 완료

### 프로젝트 마무리

- [ ] 최종 코드 리뷰 완료
- [ ] 성능 테스트 완료
- [ ] 보안 검증 완료
- [ ] 사용자 가이드 배포
- [ ] 팀 공유 및 교육 완료

---

**프로젝트 완료일**: 2025-10-20  
**최종 검토자**: 개발팀 리드  
**승인자**: 프로젝트 매니저

---

_이 문서는 전문가 배지 시스템 개발의 전체적인 실행 계획을 담고 있습니다. 각 단계별로 체크리스트를 통해 진행 상황을 추적하고, SOLID 원칙을 기반으로 견고한 시스템을 구축합니다._
