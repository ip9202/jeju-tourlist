# "동네물어봐" 기능 정의서 및 개발 로드맵

## 📋 목차
1. [개발 방향성](#-개발-방향성)
2. [MVP 핵심 기능 정의](#-mvp-핵심-기능-정의)
3. [기술 아키텍처 설계](#-기술-아키텍처-설계)
4. [단계별 개발 로드맵](#-단계별-개발-로드맵)
5. [고도화 기능 정의](#-고도화-기능-정의)
6. [기술적 도전과제](#-기술적-도전과제)
7. [운영 및 관리 시스템](#-운영-및-관리-시스템)
8. [성능 및 보안 고려사항](#-성능-및-보안-고려사항)

---

## 🎯 개발 방향성

### 20년 경력 기반 핵심 원칙

1. **답변자 중심 설계**: 답변자의 참여를 최우선으로 하는 UX 설계
2. **초즉시성 확보**: 10분 내 첫 답변 목표 달성을 위한 제주도 특화 시스템 설계
3. **확장성 우선**: 멀티리전 확장을 고려한 아키텍처 설계
4. **데이터 중심**: AI 서비스를 위한 체계적 데이터 수집 구조
5. **운영 편의성**: 커뮤니티 관리를 위한 관리자 도구 완비

### 개발 철학
- **빠른 검증**: MVP로 핵심 가치 검증 후 점진적 확장
- **사용자 중심**: 실제 사용자 피드백 기반 개발
- **기술적 안정성**: 검증된 기술 스택으로 안정적 서비스 구축
- **미래 대비**: AI 서비스 연계를 고려한 데이터 모델 설계

---

## 🛠️ MVP 핵심 기능 정의

### Phase 1: 웹 서비스 MVP (1-3개월)

#### 1. 사용자 인증 시스템
**기능 개요**
- 간단한 회원가입/로그인 시스템
- 제주 현지인 인증 시스템

**상세 요구사항**
- **회원가입**: 이메일/패스워드 기반
  - 닉네임, 거주지역 (제주시/서귀포시/기타) 선택
  - 이용약관 및 개인정보처리방침 동의
- **로그인**: 이메일/패스워드 + 소셜로그인 (카카오, 네이버, 구글)
- **현지인 인증 (다단계 방식)**:

  **🟢 1단계: 위치 기반 간편 인증 (즉시 적용)**
  - GPS 기반 제주도 거주 패턴 분석 (1주일 이상 제주도 체류)
  - 제주도 내 일정한 위치(집/직장) 반복 방문 패턴 감지
  - 자동으로 "임시 현지인" 배지 부여 (⭐ 표시)

  **🟡 2단계: 소셜 인증 (선택)**
  - 제주도 관련 SNS 게시물 연동 (인스타그램/페이스북)
  - 제주도 지인들의 추천/인증 (현지인 3명 추천)
  - "검증된 현지인" 배지 부여 (🏠 표시)

  **🔴 3단계: 공식 인증 (최고 등급)**
  - 주민등록등본 또는 공과금 고지서 업로드
  - "공식 제주도민" 배지 부여 (👑 표시)
  - 답변 신뢰도 가중치 적용
- **프로필 관리**: 닉네임, 자기소개, 관심분야 설정

**소셜로그인 확장**
- **카카오 로그인**: 카카오 REST API v2 활용
  - 사용자 정보: 닉네임, 프로필 이미지, 이메일 (선택)
  - 연령대 정보 활용으로 타겟 사용자 분석
- **네이버 로그인**: 네이버 로그인 API 활용
  - 사용자 정보: 닉네임, 프로필 이미지, 이메일, 연령대
  - 제주도 거주자 비율이 높은 네이버 특성 활용
- **구글 로그인**: Google OAuth 2.0
  - 글로벌 사용자 대응 (외국인 관광객)

**기술 구현**
- JWT 기반 인증 (소셜로그인 통합)
- OAuth 2.0 표준 준수
- 소셜 계정 연동 및 통합 관리
- 이미지 업로드 (프로필, 인증서류)
- **위치 기반 현지인 인증 알고리즘**
- 관리자 승인 워크플로우

**📍 위치 기반 현지인 인증 알고리즘**
```typescript
// 현지인 패턴 감지 알고리즘
const detectLocalPattern = (userLocations: LocationHistory[]) => {
  // 1. 제주도 체류 기간 분석 (최소 1주일)
  const jejuStayDuration = calculateJejuStayDuration(userLocations);

  // 2. 정기적 위치 패턴 감지 (집/직장)
  const regularLocations = findRegularLocations(userLocations, {
    minVisits: 5,        // 최소 5회 방문
    timeRange: '7days',  // 1주일 내
    radius: 200         // 200m 반경
  });

  // 3. 관광 vs 거주 패턴 구분
  const residenceScore = calculateResidenceScore({
    nighttimeStay: getNighttimeStayPattern(userLocations),
    weekdayActivity: getWeekdayActivityPattern(userLocations),
    regularPlaces: regularLocations.length
  });

  // 4. 현지인 가능성 점수 계산
  return {
    isLikelyLocal: residenceScore > 70,
    confidence: residenceScore,
    regularPlaces: regularLocations,
    stayDuration: jejuStayDuration
  };
};

// 실시간 현지인 인증 체크
const checkLocalStatus = async (userId: string) => {
  const recentLocations = await getUserLocations(userId, '7days');
  const pattern = detectLocalPattern(recentLocations);

  if (pattern.isLikelyLocal && pattern.confidence > 80) {
    await updateUserBadge(userId, 'TEMP_LOCAL', {
      confidence: pattern.confidence,
      detectedAt: new Date(),
      autoGranted: true
    });
  }
};
```

#### 2. Q&A 핵심 시스템 (메시지 스타일)
**기능 개요**
- 카카오톡/인스타 DM 스타일의 자연스러운 Q&A 시스템
- 메시지 기반 질문, 채팅형 답변, 채택 시스템

**📱 메시지 스타일 질문 작성**
- **간편 질문 입력**:
  - 한 줄 메시지 형태 (10-500자)
  - 자동 해시태그 파싱 (#제주맛집 #서귀포카페)
  - 이모지 지원 (🍜🏖️☕🚗 등)
  - 사진 첨부 (최대 5장, 드래그 앤 드롭)
- **스마트 태그 제안**:
  - 입력 중 자동 해시태그 추천
  - 위치 기반 자동 지역 태그 제안
  - 과거 질문 패턴 학습 기반 추천

**💬 채팅형 답변 시스템**
- **말풍선 스타일 답변**:
  - 메신저 UI 형태의 답변 작성
  - 텍스트 + 이미지 + 링크 조합
  - 음성 메시지 지원 (모바일)
- **실시간 타이핑 표시**:
  - 답변 작성 중 실시간 표시
  - "답변 작성 중..." 상태 표시
- **빠른 답변 기능**:
  - 템플릿 답변 (영업시간, 위치, 가격 등)
  - 이전 답변 재사용 기능

**🏷️ 새로운 해시태그 시스템**
- **자연스러운 태그 입력**:
  - 메시지 내 #태그 자동 인식
  - 지역: #제주시 #서귀포 #애월 #성산 #중문
  - 카테고리: #맛집 #카페 #해변 #드라이브 #숙소 #액티비티
  - 시간: #지금당장 #내일 #이번주말
  - 상황: #혼자 #커플 #가족 #친구들
- **트렌딩 태그**:
  - 실시간 인기 해시태그 표시
  - 계절별/날씨별 추천 태그

**채택 시스템**
- **질문자 채택**: 가장 도움된 답변 1개 선택
- **커뮤니티 평가**: 좋아요/싫어요 시스템
- **추천 답변**: 좋아요 순으로 자동 정렬

#### 3. 포인트 및 배지 시스템
**포인트 시스템**
- **기본 포인트 획득**:
  - 답변 작성: 50P
  - 답변 채택: +100P (총 150P)
  - 좋아요 1개당: +10P
- **품질 보너스**:
  - 사진 첨부 답변: +30P
  - 100자 이상 상세 답변: +20P
  - 실시간 답변(1시간 내): +50P

**배지 시스템 (다단계 현지인 인증 반영)**

**⭐ 임시 현지인 배지 (GPS 자동 인증)**
- ⭐ **임시 현지인** (1주일 이상 제주 거주 패턴, 자동 부여)
- 🏢 **제주 직장인** (평일 규칙적 활동 패턴)
- 🏠 **제주 체류자** (야간 고정 위치 패턴)

**🏠 검증된 현지인 배지 (소셜 인증)**
- 🏠 **검증된 제주도민** (지인 3명 추천 또는 SNS 인증)
- 🌊 **해녀의 후예** (동부 지역 인증 + 지역 특성)
- ⛰️ **한라산 지기** (서귀포 인증 + 지역 특성)

**👑 공식 인증 배지 (서류 인증)**
- 👑 **공식 제주도민** (주민등록 기반 최고 신뢰도)
- 🏘️ **제주 토박이** (5년 이상 거주 증명)

**활동 배지**
- 🥉 **새내기 도우미** (답변 10개)
- 🥈 **든든한 가이드** (답변 50개)
- 🥇 **제주 마스터** (답변 100개)

**전문 분야 배지**
- 🍜 **맛집 탐정** (음식 관련 답변 20개)
- ☕ **카페 큐레이터** (카페 관련 답변 15개)
- 🚗 **드라이브 가이드** (교통/드라이브 답변 15개)
- 🏖️ **액티비티 전문가** (체험/관광 답변 15개)

#### 4. 스마트 검색 및 해시태그 필터링
**🔍 인스타그램 스타일 검색**
- **해시태그 기반 검색**: #제주맛집, #애월카페 등 자연어 검색
- **실시간 검색 제안**: 입력 중 인기 해시태그 자동 완성
- **트렌딩 태그**: 현재 가장 많이 검색되는 태그 표시
- **저장된 검색**: 자주 검색하는 태그 북마크

**🏷️ 동적 해시태그 시스템**
- **자동 분류**:
  - 📍 지역: #제주시 #서귀포 #애월 #성산 #중문 #한림
  - 🍽️ 음식: #맛집 #카페 #술집 #디저트 #현지음식
  - 🏖️ 액티비티: #해변 #등산 #드라이브 #체험 #사진명소
  - ⏰ 시간: #지금당장 #내일 #이번주말 #평일 #저녁
  - 👥 동행: #혼자 #커플 #가족 #친구 #아이동반
- **스마트 제안**: 기존 질문 패턴 학습으로 관련 태그 추천
- **태그 조합**: 여러 태그 조합 검색 (#제주시 + #맛집 + #커플)

**📊 검색 결과 최적화**
- **관련도순 정렬**: 해시태그 매칭도 기반 정렬
- **최신순**: 시간 기반 정렬
- **인기순**: 좋아요 + 답변 수 기반
- **답변완료 우선**: 해결된 질문 우선 표시

**🎯 고급 필터링**
- **상태별**: 🟡 답변대기, 🟢 답변완료, 🔴 긴급
- **기간별**: 📅 오늘, 이번주, 이번달, 전체
- **지역별**: 📍 GPS 기반 근처 질문 우선
- **답변자별**: 🏠 제주도민, 🏆 전문가, 👥 전체

#### 5. 기본 알림 시스템
**이메일 알림**
- 새 답변 등록시 질문자에게 알림
- 답변 채택시 답변자에게 알림
- 주간 활동 요약 (옵션)

**웹 내 알림**
- 실시간 알림 표시
- 알림 히스토리 관리

#### 6. 관리자 도구 (기본)
**콘텐츠 관리**
- 질문/답변 관리 (수정, 삭제, 비공개)
- 사용자 관리 (활동정지, 등급 조정)
- 신고 처리 시스템

**통계 대시보드**
- 일별/주별 Q&A 현황
- 사용자 활동 통계
- 인기 태그 분석

---

## 🎨 메시지 스타일 UI/UX 디자인 가이드

### 디자인 철학
**"카카오톡처럼 자연스럽게, 인스타그램처럼 시각적으로"**

#### 핵심 디자인 원칙
1. **친숙함**: 모든 사용자가 익숙한 메시지 UI
2. **직관성**: 설명 없이도 사용법을 알 수 있는 인터페이스
3. **효율성**: 최소한의 탭으로 질문과 답변 완료
4. **시각성**: 이미지 중심의 정보 전달

### 📱 메인 피드 디자인

#### 타임라인 레이아웃
```
┌─────────────────────────────────────┐
│ 🔍 [검색바: "궁금한 거 물어보세요"]    │
│ ┌─ #지금당장 #맛집 #커플 ────────┐   │
│ │                               │   │
│ │ [프로필] 여행러버 • 2시간 전    │   │
│ │ 중문 근처에서 데이트하기 좋은    │   │
│ │ 카페 추천해주세요! #중문 #카페   │   │
│ │ #데이트 #오션뷰              │   │
│ │                               │   │
│ │ [📷📷📷] 이미지 3장           │   │
│ │                               │   │
│ │ 💬 12  👍 8  📍 중문        │   │
│ └─────────────────────────────────┘   │
└─────────────────────────────────────┘
```

#### 질문 메시지 스타일
- **질문자 말풍선**: 오른쪽 정렬, 파란색 계열
- **답변자 말풍선**: 왼쪽 정렬, 회색/흰색 계열
- **시간 표시**: 말풍선 아래 작은 텍스트
- **읽음 표시**: 질문자의 읽음 상태 표시

### 💬 대화형 상세 페이지

#### 채팅 스타일 레이아웃
```
┌─────────────────────────────────────┐
│ ← 동네물어봐                       ⋮ │
├─────────────────────────────────────┤
│                                     │
│        [여행러버] 📍 중문 • 2시간 전  │
│        ┌─────────────────────────┐  │
│        │ 중문 근처에서 데이트하기  │  │
│        │ 좋은 카페 추천해주세요!   │  │
│        │ #중문 #카페 #데이트      │  │
│        │ [📷📷📷]              │  │
│        └─────────────────────────┘  │
│                                     │
│ [제주도민] 카페지기 • 1시간 전         │
│ ┌─────────────────────────────────┐   │
│ │ 오션뷰 카페 추천드려요!          │   │
│ │ 📍 중문색달해변 바로 앞           │   │
│ │ ☕ 아메리카노 6,000원            │   │
│ │ 🕐 09:00-22:00 (무휴)          │   │
│ │ [📷📷] 실제 방문 사진           │   │
│ └─────────────────────────────────┘   │
│                            👍 5  ✅   │
│                                     │
│ [답변 입력창]                        │
└─────────────────────────────────────┘
```

### 🎯 핵심 UI 컴포넌트

#### 1. 질문 작성 컴포넌트
```jsx
// 메시지 스타일 질문 입력
<MessageComposer>
  <TextArea
    placeholder="제주도에 대해 궁금한 걸 자유롭게 물어보세요! 🏝️"
    maxLength={500}
    autoExpand={true}
  />
  <HashtagSuggestions />
  <PhotoUpload maxFiles={5} />
  <LocationTag />
  <UrgencyToggle />
</MessageComposer>
```

#### 2. 말풍선 컴포넌트
```jsx
// 질문 말풍선
<MessageBubble type="question" sender="user">
  <MessageContent>
    <Text>중문 근처 맛집 추천해주세요!</Text>
    <Hashtags>#중문 #맛집 #현지인추천</Hashtags>
    <ImageGallery images={[...]} />
  </MessageContent>
  <MessageMeta>
    <Timestamp>2시간 전</Timestamp>
    <Location>📍 중문</Location>
  </MessageMeta>
</MessageBubble>

// 답변 말풍선
<MessageBubble type="answer" sender="local">
  <UserProfile badge="제주도민" />
  <MessageContent>
    <Text>현지인이 추천하는 진짜 맛집이에요!</Text>
    <QuickInfo>
      <Location>📍 서귀포시 중문동</Location>
      <Price>💰 1인당 15,000원</Price>
      <Hours>🕐 11:00-21:00</Hours>
    </QuickInfo>
    <ImageGallery images={[...]} />
  </MessageContent>
  <MessageActions>
    <LikeButton count={12} />
    <AcceptButton />
    <ShareButton />
  </MessageActions>
</MessageBubble>
```

### 🏷️ 해시태그 시스템 UI

#### 태그 입력 및 추천
- **실시간 추천**: 타이핑 중 #으로 시작하면 자동 추천
- **인기 태그**: 현재 트렌딩 중인 태그 상단 표시
- **스마트 분류**: 지역/카테고리/시간/상황별 자동 분류

#### 태그 표시 스타일
```css
.hashtag {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  margin: 2px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.hashtag:hover {
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}
```

### 📊 상태 표시 시스템

#### 실시간 상태
- **타이핑 중**: "답변 작성 중..." 애니메이션
- **온라인 상태**: 프로필 옆 초록색 점
- **읽음 표시**: 체크 마크 (한 개/두 개)
- **답변 대기**: 시계 아이콘 + 대기 시간

#### 배지 및 레벨 표시
- **제주도민 배지**: 🏠 아이콘 + "제주도민" 텍스트
- **전문가 배지**: 🍜 맛집 탐정, ☕ 카페 큐레이터 등
- **레벨 표시**: 답변 개수에 따른 색상 변화

### 🔄 인터랙션 디자인

#### 스와이프 제스처 (모바일)
- **왼쪽 스와이프**: 좋아요 + 북마크
- **오른쪽 스와이프**: 답변 작성
- **길게 누르기**: 메시지 옵션 (신고, 공유 등)

#### 애니메이션
- **메시지 등장**: 아래에서 위로 슬라이드
- **좋아요**: 하트 애니메이션 + 숫자 증가
- **답변 채택**: 체크 마크 + 초록색 글로우

### 📱 반응형 디자인

#### 모바일 최적화
- **한 손 조작**: 하단 고정 입력창
- **스크롤 최적화**: 무한 스크롤 + 가상화
- **터치 타겟**: 최소 44px 터치 영역

#### 데스크톱 확장
- **와이드 레이아웃**: 좌우 여백 활용
- **키보드 단축키**: Ctrl+Enter로 전송
- **마우스 호버**: 추가 정보 툴팁

---

## 🏗️ 기술 아키텍처 설계

### 프론트엔드 아키텍처

#### 웹 서비스 (Phase 1)
**기술 스택**
- **프레임워크**: Next.js 14 (App Router)
- **언어**: TypeScript
- **스타일링**: Tailwind CSS + Framer Motion (애니메이션)
- **UI 컴포넌트**: Radix UI (메시지 말풍선, 모달)
- **상태관리**: Zustand + React Query
- **실시간**: Socket.io Client (타이핑 상태, 실시간 메시지)
- **소셜로그인**: NextAuth.js (카카오, 네이버, 구글)
- **해시태그**: 커스텀 파서 + Elasticsearch

**메시지 스타일 최적화**
- **실시간 UI**: 타이핑 인디케이터, 읽음 상태 실시간 업데이트
- **무한 스크롤**: 메시지 히스토리 가상화 (react-window)
- **해시태그 파싱**: 실시간 해시태그 하이라이팅 및 링크
- **이모지 지원**: 네이티브 이모지 + 커스텀 제주 이모지
- **이미지 최적화**: Next.js Image + lazy loading
- **PWA 지원**: 모바일 앱 같은 경험 제공

#### 모바일 앱 (Phase 2)
**기술 스택**
- **프레임워크**: React Native (추천) 또는 Flutter
- **상태관리**: Redux Toolkit
- **내비게이션**: React Navigation
- **푸시 알림**: React Native Firebase

**앱 특화 기능**
- GPS 기반 위치 태그
- 카메라 연동 사진 업로드
- 오프라인 모드 (답변 캐싱)
- 푸시 알림

### 백엔드 아키텍처

#### API 서버
**기술 스택**
- **런타임**: Node.js 18+
- **프레임워크**: Express.js
- **언어**: TypeScript
- **데이터베이스**: PostgreSQL 15
- **ORM**: Prisma
- **인증**: JWT + Passport.js (소셜로그인 통합)
- **실시간**: Socket.io
- **파일 업로드**: Multer + AWS S3
- **해시태그 검색**: Elasticsearch (빠른 태그 검색)
- **소셜로그인 API**: 카카오/네이버/구글 OAuth 통합

#### 소셜로그인 구현 상세

**카카오 로그인 통합**
```javascript
// Passport 카카오 전략
passport.use(new KakaoStrategy({
  clientID: process.env.KAKAO_CLIENT_ID,
  callbackURL: "/auth/kakao/callback"
}, async (accessToken, refreshToken, profile, done) => {
  try {
    // 기존 사용자 확인 또는 신규 생성
    const user = await findOrCreateUser({
      provider: 'kakao',
      providerId: profile.id,
      email: profile._json.kakao_account.email,
      nickname: profile.displayName,
      profileImage: profile._json.properties.profile_image
    });
    return done(null, user);
  } catch (error) {
    return done(error, null);
  }
}));
```

**네이버 로그인 통합**
```javascript
// Passport 네이버 전략
passport.use(new NaverStrategy({
  clientID: process.env.NAVER_CLIENT_ID,
  clientSecret: process.env.NAVER_CLIENT_SECRET,
  callbackURL: "/auth/naver/callback"
}, async (accessToken, refreshToken, profile, done) => {
  try {
    const user = await findOrCreateUser({
      provider: 'naver',
      providerId: profile.id,
      email: profile._json.email,
      nickname: profile._json.nickname,
      profileImage: profile._json.profile_image,
      ageRange: profile._json.age // 네이버 특화 정보
    });
    return done(null, user);
  } catch (error) {
    return done(error, null);
  }
}));
```

#### 메시지 스타일 실시간 시스템

**Socket.io 이벤트 구조**
```javascript
// 실시간 메시지 이벤트
io.on('connection', (socket) => {
  // 질문 스레드 입장
  socket.on('join_question', (questionId) => {
    socket.join(`question_${questionId}`);
  });

  // 타이핑 상태 전송
  socket.on('typing_start', (data) => {
    socket.to(`question_${data.questionId}`).emit('user_typing', {
      userId: data.userId,
      nickname: data.nickname
    });
  });

  // 새 답변 실시간 전송
  socket.on('new_answer', (answer) => {
    io.to(`question_${answer.questionId}`).emit('answer_received', answer);
  });

  // 답변 채택 실시간 알림
  socket.on('answer_accepted', (data) => {
    io.to(`question_${data.questionId}`).emit('answer_accepted', data);
  });
});
```

#### 해시태그 처리 시스템

**해시태그 파싱 및 저장**
```javascript
// 해시태그 자동 추출 및 분류
const parseHashtags = (content) => {
  const hashtagRegex = /#[\w가-힣]+/g;
  const hashtags = content.match(hashtagRegex) || [];

  return hashtags.map(tag => ({
    original: tag,
    normalized: tag.toLowerCase().replace('#', ''),
    category: classifyHashtag(tag) // 지역/카테고리/시간 등 분류
  }));
};

const classifyHashtag = (tag) => {
  const regions = ['제주시', '서귀포', '애월', '성산', '중문'];
  const categories = ['맛집', '카페', '해변', '숙소', '액티비티'];
  const timing = ['지금당장', '내일', '이번주말'];

  if (regions.some(r => tag.includes(r))) return 'region';
  if (categories.some(c => tag.includes(c))) return 'category';
  if (timing.some(t => tag.includes(t))) return 'timing';
  return 'other';
};
```

#### 데이터베이스 설계
**주요 테이블 구조**
```sql
-- 사용자
users {
  id: UUID
  email: string
  password_hash: string
  nickname: string
  region_code: string  -- 'jeju_city', 'seogwipo', 'etc'
  is_local_verified: boolean
  points: integer
  created_at: timestamp
}

-- 질문
questions {
  id: UUID
  user_id: UUID
  title: string
  content: text
  tags: string[]
  region_code: string
  category: string
  urgency: enum('normal', 'urgent')
  status: enum('open', 'answered', 'closed')
  created_at: timestamp
}

-- 답변
answers {
  id: UUID
  question_id: UUID
  user_id: UUID
  content: text
  is_accepted: boolean
  likes_count: integer
  created_at: timestamp
}

-- 포인트 히스토리
point_transactions {
  id: UUID
  user_id: UUID
  amount: integer
  type: enum('answer', 'accepted', 'like', 'bonus')
  reference_id: UUID
  created_at: timestamp
}
```

#### 확장성을 위한 설계
**멀티리전 지원**
- region_code 기반 데이터 분리
- 지역별 태그 네임스페이스 (#제주맛집, #부산맛집)
- 지역별 관리자 권한 체계

**캐싱 전략**
- Redis를 활용한 세션 관리
- 인기 질문/답변 캐싱
- 사용자 포인트/배지 캐싱

### 인프라 및 배포

#### Phase 1: 개발/테스트 환경
**웹 호스팅**: Vercel (프론트엔드)
**API 호스팅**: Railway 또는 Render (백엔드)
**데이터베이스**: Neon PostgreSQL (무료 티어)
**파일 저장**: Cloudinary (무료 티어)
**도메인**: .com 도메인 구입

#### Phase 2: 운영 환경 (확장성 고려)
**클라우드**: AWS
- **컴퓨팅**: ECS Fargate (컨테이너 기반)
- **데이터베이스**: RDS PostgreSQL (Multi-AZ)
- **파일 저장**: S3 + CloudFront CDN
- **로드밸런서**: Application Load Balancer
- **캐싱**: ElastiCache Redis

**모니터링 및 로깅**
- **성능 모니터링**: DataDog 또는 New Relic
- **에러 추적**: Sentry
- **로그 관리**: CloudWatch Logs

---

## 📅 단계별 개발 로드맵

### Phase 1: MVP 웹 개발 (1-3개월)

#### Month 1: 기반 시스템 구축
**Week 1-2**: 개발 환경 및 기본 구조
- Next.js 프로젝트 셋업 + TypeScript 설정
- Express.js API 서버 구축
- PostgreSQL + Prisma 연동
- 기본 인증 시스템 (회원가입/로그인)
- 개발/배포 파이프라인 구축

**Week 3-4**: 핵심 기능 개발
- 질문 작성/조회 기능
- 답변 작성/조회 기능
- 태그 시스템 구현
- 이미지 업로드 기능

#### Month 2: 기능 완성도 향상
**Week 5-6**: 고급 기능
- 포인트/배지 시스템 구현
- 채택/좋아요 시스템
- 검색 및 필터링 기능
- 알림 시스템 (이메일)

**Week 7-8**: 관리도구 및 UI/UX
- 관리자 대시보드 구현
- 신고/모더레이션 시스템
- 반응형 디자인 최적화
- 성능 최적화

#### Month 3: 테스트 및 런칭 준비
**Week 9-10**: 테스트 및 안정화
- 통합 테스트 및 부하 테스트
- 보안 점검 및 취약점 수정
- SEO 최적화
- 접근성 개선

**Week 11-12**: 베타 런칭
- 베타 사용자 모집 (지인 10명)
- 피드백 수집 및 개선
- 정식 런칭 준비
- 운영 가이드라인 작성

### Phase 2: 모바일 앱 개발 (4-6개월)

#### Month 4: 모바일 앱 기반 구축
**Week 13-16**: 앱 프로젝트 셋업
- React Native 프로젝트 생성
- 웹과 동일한 기능의 모바일 버전 구현
- API 연동 및 인증 시스템
- 기본 네비게이션 구조

#### Month 5: 앱 특화 기능 개발
**Week 17-20**: 모바일 특화 기능
- GPS 기반 위치 태그
- 카메라 연동 및 사진 업로드
- 푸시 알림 시스템
- 오프라인 모드 구현

#### Month 6: 앱 최적화 및 출시 준비
**Week 21-24**: 최적화 및 출시
- 성능 최적화 및 메모리 관리
- iOS/Android 스토어 등록 준비
- 앱 아이콘, 스크린샷 제작
- 앱 스토어 최적화 (ASO)

### Phase 3: 고도화 및 확장 (6-12개월)

#### Month 7-9: 고급 기능 추가
- 실시간 채팅 기능
- 고급 검색 (지도 기반)
- 맞춤형 추천 시스템
- 소셜 기능 (팔로우, 피드)

#### Month 10-12: 확장 준비
- 멀티리전 지원 시스템 구축
- 고급 관리자 도구
- 데이터 분석 및 인사이트 도구
- 제휴업체 관리 시스템

### Phase 4: AI 서비스 개발 (12-24개월)

#### Month 13-18: 데이터 분석 및 AI 기반 구축
- 수집된 Q&A 데이터 분석
- 추천 알고리즘 개발
- 자동 태그 생성 시스템
- 질문 품질 평가 시스템

#### Month 19-24: AI 서비스 출시
- "동네물어봐 AI" 서비스 개발
- 개인화 여행 계획 기능
- 실시간 추천 시스템
- AI 기반 답변 품질 관리

---

## ⚡ 고도화 기능 정의

### 실시간 기능 고도화

#### 1. 실시간 채팅 시스템
**기능 개요**
- 질문자와 답변자 간 1:1 채팅
- 긴급 질문에 대한 즉석 소통

**기술 구현**
- Socket.io 기반 실시간 메시징
- 채팅방 생성 및 관리
- 메시지 히스토리 저장
- 읽음 상태 표시

#### 2. 라이브 Q&A 이벤트
**기능 개요**
- 특정 주제에 대한 실시간 Q&A 세션
- 현지 전문가 초청 이벤트

**구현 방안**
- 화상회의 연동 (Zoom API)
- 실시간 질문 투표 시스템
- 이벤트 예약 및 알림

### 고급 검색 및 추천

#### 1. 지도 기반 검색
**기능 개요**
- 지도에서 특정 위치 클릭하여 관련 Q&A 검색
- 주변 반경 내 추천 장소 표시

**기술 구현**
- 카카오맵 API 연동
- GeoJSON 기반 위치 데이터
- 반경 검색 알고리즘

#### 2. AI 기반 맞춤 추천
**기능 개요**
- 사용자 행동 분석 기반 개인화 추천
- 유사한 여행자의 선호 분석

**구현 방안**
- 사용자 행동 로깅
- 머신러닝 모델 (협업 필터링)
- A/B 테스트를 통한 추천 성능 최적화

### 소셜 기능

#### 1. 팔로우 시스템
**기능 개요**
- 신뢰하는 답변자 팔로우
- 팔로우한 사용자의 활동 피드

#### 2. 여행 일정 공유
**기능 개요**
- 추천받은 정보로 여행 일정 작성
- 다른 사용자와 일정 공유 및 참고

### 고급 관리 도구

#### 1. 자동 모더레이션
**기능 개요**
- AI 기반 부적절한 내용 자동 감지
- 스팸/광고성 게시물 자동 필터링

**기술 구현**
- 자연어 처리 (NLP) 모델
- 이미지 분석 API
- 자동 신고 및 검토 시스템

#### 2. 고급 분석 대시보드
**기능 개요**
- 사용자 행동 패턴 분석
- 콘텐츠 품질 지표 모니터링
- 수익 모델 성과 분석

---

## 🚫 기술적 도전과제

### 1. 실시간성 확보

#### 도전과제
- 10분 내 첫 답변 목표 달성 (제주도 작은 동네 특성 반영)
- 사용자가 적은 초기 상황에서의 답변율 확보

#### 해결 방안
**푸시 알림 최적화**
- 지역별, 관심분야별 타겟팅 알림
- 답변자의 온라인 상태 추적
- 긴급 질문에 대한 우선 알림

**답변자 인센티브 강화**
- 빠른 답변에 대한 추가 포인트
- 실시간 답변 배지 시스템
- 리더보드를 통한 경쟁 요소

#### 기술적 구현
```javascript
// 실시간 알림 시스템 예시
const notifyAnswerers = async (question) => {
  const targetUsers = await findTargetAnswerers({
    region: question.region_code,
    categories: question.tags,
    isOnline: true
  });

  for (const user of targetUsers) {
    await sendPushNotification(user.device_token, {
      title: "새로운 질문이 있어요!",
      body: question.title,
      data: { questionId: question.id }
    });
  }
};
```

### 2. 확장성 설계

#### 도전과제
- 멀티리전 확장 시 데이터 관리
- 지역별 커뮤니티 특성 반영
- 성능 저하 없는 규모 확장

#### 해결 방안
**데이터 아키텍처**
```sql
-- 지역별 네임스페이스 설계
CREATE TABLE regions (
  code VARCHAR(20) PRIMARY KEY,
  name VARCHAR(100),
  parent_code VARCHAR(20),
  settings JSONB
);

-- 멀티리전 지원 태그 시스템
CREATE TABLE tags (
  id UUID PRIMARY KEY,
  name VARCHAR(50),
  region_code VARCHAR(20),
  category VARCHAR(30),
  usage_count INTEGER DEFAULT 0
);
```

**성능 최적화**
- 지역별 데이터베이스 샤딩
- CDN을 통한 정적 콘텐츠 배포
- 캐싱 전략 (Redis 클러스터)

### 3. 커뮤니티 품질 관리

#### 도전과제
- 답변 품질 유지
- 스팸/광고 방지
- 신뢰할 수 있는 정보 검증

#### 해결 방안
**자동화된 품질 관리**
```javascript
// 답변 품질 평가 시스템
const evaluateAnswerQuality = (answer) => {
  const score = {
    length: answer.content.length > 100 ? 20 : 10,
    hasImage: answer.images.length > 0 ? 15 : 0,
    responseTime: answer.responseTime < 3600 ? 25 : 10,
    userReputation: answer.user.reputation * 0.3
  };

  return Object.values(score).reduce((sum, val) => sum + val, 0);
};
```

**커뮤니티 기반 검증**
- 답변 채택률 기반 신뢰도 점수
- 베테랑 사용자의 답변 검증 시스템
- 잘못된 정보 신고 및 수정 프로세스

### 4. 초기 사용자 확보

#### 도전과제
- 질문자 vs 답변자 균형 유지
- 초기 콘텐츠 부족 문제
- 네트워크 효과 발생까지의 공백기

#### 해결 방안
**시드 콘텐츠 전략**
- 운영진이 예상 질문 20-30개 사전 작성
- 지인 답변자 10명 우선 확보
- FAQ 형태의 기본 정보 구축

**답변자 인센티브**
- 초기 가입자 특별 혜택
- 첫 답변에 대한 보너스 포인트
- 지역별 앰배서더 시스템

---

## 🛡️ 운영 및 관리 시스템

### 콘텐츠 모더레이션

#### 1. 자동 필터링 시스템
**금지어 필터**
```javascript
const contentFilter = {
  spam: ['광고', '홍보', '판매', '구매'],
  inappropriate: ['욕설', '비하', '혐오'],
  commercial: ['할인', '쿠폰', '이벤트', '무료']
};

const checkContent = (text) => {
  for (const [category, words] of Object.entries(contentFilter)) {
    if (words.some(word => text.includes(word))) {
      return { isBlocked: true, reason: category };
    }
  }
  return { isBlocked: false };
};
```

#### 2. 사용자 신고 시스템
**신고 카테고리**
- 스팸/광고
- 부적절한 내용
- 잘못된 정보
- 저작권 침해

**처리 프로세스**
1. 신고 접수 (사용자)
2. 자동 검토 (AI)
3. 관리자 검토 (필요시)
4. 조치 결정 (경고/삭제/정지)
5. 신고자/피신고자 알림

### 사용자 관리

#### 1. 사용자 등급 시스템
```javascript
const userLevels = {
  newcomer: { minPoints: 0, permissions: ['ask', 'answer'] },
  regular: { minPoints: 500, permissions: ['ask', 'answer', 'vote'] },
  trusted: { minPoints: 2000, permissions: ['ask', 'answer', 'vote', 'moderate'] },
  expert: { minPoints: 5000, permissions: ['ask', 'answer', 'vote', 'moderate', 'feature'] }
};
```

#### 2. 활동 모니터링
**추적 지표**
- 질문/답변 작성 빈도
- 답변 채택률
- 커뮤니티 기여도
- 신고 받은 횟수

### 데이터 분석 및 인사이트

#### 1. 실시간 대시보드
**핵심 지표**
- 일간/주간 활성 사용자
- 평균 답변 시간
- 답변 채택률
- 지역별/카테고리별 활동

#### 2. 주간 리포트
**자동 생성 리포트**
```javascript
const generateWeeklyReport = async () => {
  const metrics = {
    totalQuestions: await Question.count({ createdAt: lastWeek }),
    averageResponseTime: await calculateAverageResponseTime(),
    topCategories: await getTopCategories(),
    activeAnswerers: await getActiveAnswerers(10)
  };

  return generateReportTemplate(metrics);
};
```

---

## 🔒 성능 및 보안 고려사항

### 성능 최적화

#### 1. 데이터베이스 최적화
**인덱스 전략**
```sql
-- 질문 검색 최적화
CREATE INDEX idx_questions_region_category ON questions(region_code, category);
CREATE INDEX idx_questions_created_at ON questions(created_at DESC);
CREATE INDEX idx_questions_tags ON questions USING GIN(tags);

-- 사용자 활동 최적화
CREATE INDEX idx_answers_user_created ON answers(user_id, created_at DESC);
CREATE INDEX idx_point_transactions_user ON point_transactions(user_id, created_at DESC);
```

**쿼리 최적화**
- N+1 문제 방지를 위한 JOIN 최적화
- 페이지네이션 성능 개선
- 캐싱을 통한 반복 쿼리 감소

#### 2. 프론트엔드 최적화
**이미지 최적화**
```javascript
// Next.js Image 컴포넌트 활용
import Image from 'next/image';

const OptimizedImage = ({ src, alt, ...props }) => (
  <Image
    src={src}
    alt={alt}
    loading="lazy"
    quality={85}
    sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
    {...props}
  />
);
```

**코드 스플리팅**
```javascript
// 페이지별 동적 임포트
const QuestionDetail = dynamic(() => import('../components/QuestionDetail'), {
  loading: () => <Skeleton />
});
```

### 보안 강화

#### 1. 인증 및 권한 관리
**JWT 보안 강화**
```javascript
const generateTokens = (user) => {
  const accessToken = jwt.sign(
    { userId: user.id, level: user.level },
    process.env.JWT_SECRET,
    { expiresIn: '15m' }
  );

  const refreshToken = jwt.sign(
    { userId: user.id },
    process.env.REFRESH_SECRET,
    { expiresIn: '7d' }
  );

  return { accessToken, refreshToken };
};
```

#### 2. 데이터 검증
**입력 검증 및 새니타이제이션**
```javascript
const questionSchema = z.object({
  title: z.string().min(10).max(100),
  content: z.string().min(50).max(1000),
  tags: z.array(z.string()).max(3),
  region_code: z.enum(['jeju_city', 'seogwipo', 'east', 'west', 'center'])
});

const validateQuestion = (data) => {
  return questionSchema.safeParse(data);
};
```

#### 3. 파일 업로드 보안
**이미지 업로드 검증**
```javascript
const imageUpload = multer({
  storage: multer.memoryStorage(),
  fileFilter: (req, file, cb) => {
    const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
    if (allowedTypes.includes(file.mimetype)) {
      cb(null, true);
    } else {
      cb(new Error('Invalid file type'), false);
    }
  },
  limits: {
    fileSize: 5 * 1024 * 1024 // 5MB
  }
});
```

### 모니터링 및 로깅

#### 1. 에러 추적
**Sentry 연동**
```javascript
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  beforeSend(event) {
    // 민감한 정보 필터링
    if (event.exception) {
      const error = event.exception.values[0];
      if (error.value?.includes('password')) {
        return null;
      }
    }
    return event;
  }
});
```

#### 2. 성능 모니터링
**Core Web Vitals 추적**
```javascript
export function reportWebVitals(metric) {
  const { id, name, label, value } = metric;

  // Google Analytics 4에 전송
  gtag('event', name, {
    event_category: label === 'web-vital' ? 'Web Vitals' : 'Next.js custom metric',
    value: Math.round(name === 'CLS' ? value * 1000 : value),
    event_label: id,
    non_interaction: true,
  });
}
```

---

## 📊 개발 완료 기준 및 검수

### Phase 1 완료 기준

#### 기능 완성도 체크리스트
- [ ] 회원가입/로그인 정상 동작
- [ ] 질문 작성/조회/수정/삭제 기능
- [ ] 답변 작성/조회/수정/삭제 기능
- [ ] 포인트 적립/사용 시스템
- [ ] 배지 자동 부여 시스템
- [ ] 검색 및 필터링 기능
- [ ] 이미지 업로드 및 최적화
- [ ] 반응형 디자인 (모바일/태블릿/데스크톱)
- [ ] 관리자 도구 (기본 CRUD)

#### 성능 기준
- [ ] 페이지 로딩 속도 < 3초 (Fast 3G 기준)
- [ ] Core Web Vitals 모든 지표 "Good" 등급
- [ ] 이미지 최적화 및 lazy loading 구현
- [ ] API 응답 시간 < 500ms (95% 기준)

#### 보안 기준
- [ ] HTTPS 적용
- [ ] JWT 토큰 보안 구현
- [ ] 입력 검증 및 XSS 방지
- [ ] 파일 업로드 보안 검증
- [ ] 개인정보보호 정책 준수

### 품질 보증 프로세스

#### 1. 자동화 테스트
```javascript
// Jest + Testing Library 테스트 예시
describe('Question Creation', () => {
  it('should create question with valid data', async () => {
    const questionData = {
      title: '제주도 맛집 추천해주세요',
      content: '가족여행으로 제주도에 왔는데 현지인이 추천하는 맛집이 궁금합니다.',
      tags: ['맛집', '제주시'],
      region_code: 'jeju_city'
    };

    const response = await request(app)
      .post('/api/questions')
      .set('Authorization', `Bearer ${userToken}`)
      .send(questionData)
      .expect(201);

    expect(response.body.question.title).toBe(questionData.title);
  });
});
```

#### 2. 사용자 테스트
**베타 테스트 계획**
- 지인 10명 대상 1주일 베타 테스트
- 사용자 시나리오별 테스트 (질문자/답변자)
- 피드백 수집 및 개선사항 도출

#### 3. 성능 테스트
**부하 테스트**
```javascript
// Artillery.js 설정 예시
config:
  target: 'https://dongnemuleoboa.com'
  phases:
    - duration: 60
      arrivalRate: 10
    - duration: 120
      arrivalRate: 50
scenarios:
  - name: 'Browse questions'
    weight: 70
    flow:
      - get:
          url: '/api/questions'
  - name: 'Create question'
    weight: 30
    flow:
      - post:
          url: '/api/questions'
          json:
            title: 'Test question'
            content: 'Test content'
```

---

**🎯 다음 단계: 이 기능 정의서를 바탕으로 실제 개발 착수 준비**

1. **개발 환경 설정**: Next.js + Express.js 프로젝트 초기화
2. **데이터베이스 스키마 구현**: Prisma를 활용한 테이블 생성
3. **MVP 핵심 기능부터 순차적 개발**
4. **베타 테스트를 통한 검증 및 개선**

이 문서는 실제 개발 과정에서 지속적으로 업데이트되며, 사용자 피드백과 기술적 제약사항을 반영하여 유연하게 조정될 예정입니다.