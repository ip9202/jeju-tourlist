# CLAUDE.md

이 파일은 Claude Code (claude.ai/code)가 이 리포지토리에서 작업할 때 가이드를 제공합니다.

## 프로젝트 개요

"동네물어봐" (AskLocal)는 제주도 여행자와 현지 주민을 연결하여 실시간 여행 정보를 제공하는 여행 Q&A 커뮤니티 서비스입니다. 현재 포괄적인 비즈니스 문서와 함께 기획 단계에 있습니다.

## 서비스 컨셉

- **브랜드**: "동네물어봐" (영문: AskLocal/NeighborAsk)
- **핵심 서비스**: 제주 여행자와 현지 주민 간의 실시간 Q&A
- **비즈니스 모델**: 답변 중심 커뮤니티 + 리워드 시스템 (포인트/배지) → 지역 업체 제휴 → AI 기반 추천 서비스
- **플랫폼 전략**: 웹 우선 개발, 이후 모바일 앱 (React Native/Flutter)
- **확장 계획**: 제주 시작 → 다른 관광지 확장 (부산, 강릉 등)

## 아키텍처 및 개발 전략

### 플랫폼 개발 로드맵

1. **Phase 1 (1-3개월)**: MVP 웹 개발
   - React/Next.js 반응형 웹 애플리케이션
   - 핵심 기능: Q&A 시스템, 사용자 인증, 포인트/배지 시스템
   - 콘텐츠 관리를 위한 관리자 도구

2. **Phase 2 (4-6개월)**: 모바일 앱 개발
   - 크로스 플랫폼 모바일 앱 (React Native 또는 Flutter)
   - 앱 특화 기능: GPS, 푸시 알림, 오프라인 모드
   - 웹-앱 동기화 시스템

### 주요 기술적 고려사항

- **멀티리전 지원**: 전국 확장을 위한 지역 코드 기반 데이터베이스 설계
- **태그 시스템**: 지역 + 카테고리 구조 (#제주맛집, #부산해변)
- **크로스 플랫폼 데이터 동기화**: 웹과 모바일 간 실시간 동기화
- **AI 데이터 수집**: 향후 AI 서비스를 위한 Q&A 데이터 수집 (목표: 질문 10k+, 답변 30k+)

## 문서 구조

모든 프로젝트 문서는 `docs/` 디렉토리에서 번호 시스템을 따릅니다:

- **01-19**: 비즈니스 기획 문서
- **20-39**: 기술 명세서 (향후)
- **40-59**: 운영 가이드라인 (향후)
- **60-79**: 마케팅 자료 (향후)
- **80-99**: 회의록 및 기타 (향후)

### 문서 관리 워크플로우

1. `docs/00-문서목록.md` 먼저 업데이트
2. 적절한 번호로 새 문서 생성
3. 완료 후 색인에 설명 추가

## 개발자를 위한 비즈니스 컨텍스트

### 핵심 사용자 여정

- **웹 사용**: 집에서 여행 계획 (상세 검색, 북마크, 일정 작성)
- **모바일 사용**: 여행 중 실시간 질문 (GPS 기반, 푸시 알림, 빠른 응답)

### 수익 모델 발전

1. **1단계**: 기본 광고 (Google AdSense)
2. **2단계**: 지역 업체 제휴 (수수료 기반)
3. **3단계**: AI 기반 여행 계획 서비스 (프리미엄 구독)

### 주요 성공 지표

- 답변률 (목표: 90%+ 질문이 답변 받기)
- 응답 시간 (목표: 첫 답변까지 10분 미만, 제주도 작은 동네 특성 반영)
- 사용자 만족도 (목표: 70%+ 답변 채택률)
- 커뮤니티 건전성 (목표: 부적절한 콘텐츠 5% 미만)

## 개발 우선순위

기능 구현 시 다음 순서로 우선순위를 두세요:

1. **답변자 중심 설계**: 현지 주민의 답변 참여 동기 부여에 집중
2. **실시간 기능**: 여행 응급상황에 대한 빠른 응답 시간 보장
3. **신뢰성 및 신뢰도**: 사용자 검증 및 품질 관리 구현
4. **확장성**: 첫날부터 멀티리전 확장을 고려한 설계
5. **데이터 수집**: 향후 AI 서비스 개발을 위한 데이터 구조화

## 한국어 지원

이 프로젝트는 한국어 중심입니다. 모든 사용자 대면 콘텐츠, 문서, 비즈니스 자료는 한국어로 작성됩니다. 코드 주석과 기술 문서는 영어로 작성할 수 있지만, 비즈니스 로직과 사용자 경험은 한국어와 한국 문화를 우선시해야 합니다.

---

## 최근 개발 진행상황 (2025-01-27)

### 📋 완료된 작업 (총 13개 문서 + 개발 구현)

#### 1-6단계: 핵심 기획 및 설계 문서 ✅

1. **비즈니스 기획 문서** (01-제주여행-QA커뮤니티-비즈니스기획서.md)
   - 완전한 비즈니스 모델 및 서비스 컨셉
   - 수익 전략 및 확장 로드맵
   - 사용자 페르소나 및 타겟 시장 분석

2. **기능 정의서 및 개발 로드맵** (02-동네물어봐-기능정의서-개발로드맵.md)
   - MVP부터 Phase 4까지 포괄적인 기능 정의
   - 상세한 기술 아키텍처 설계
   - 4단계 개발 로드맵 (24개월)

3. **UX/UI 설계 문서** (03-동네물어봐-UX플로우-와이어프레임-설계서.md)
   - 여행 전-중-후 단계별 상세 UX 플로우
   - 메시지 스타일 인터페이스 와이어프레임
   - 핵심 사용자 시나리오 및 인터랙션 플로우

4. **컴포넌트 구조 설계서** (04-동네물어봐-컴포넌트-구조-설계서.md)
   - React/TypeScript 기반 컴포넌트 아키텍처
   - 여행 단계별 특화 컴포넌트 설계
   - 상태 관리 및 성능 최적화 방안

5. **메시지 인터페이스 명세서** (05-동네물어봐-메시지-인터페이스-상호작용-명세서.md)
   - 카카오톡 스타일 메시지 UI 상세 명세
   - 실시간 상호작용 패턴 및 터치 인터페이스
   - 음성 입력 및 해시태그 시스템

6. **실시간 시스템 아키텍처** (06-동네물어봐-실시간-시스템-아키텍처.md)
   - Socket.io 기반 실시간 통신 시스템
   - 제주도 특화 10분 내 초즉시 응답 시스템
   - Redis 클러스터링 및 확장성 설계

#### 7-10단계: 기술 아키텍처 문서 ✅

7. **종합 기술 아키텍처 설계서** (07-동네물어봐-종합-기술-아키텍처-설계서.md)
   - 전체 시스템 아키텍처 및 기술 스택 정의
   - 마이크로서비스 설계 및 클라우드 네이티브 아키텍처
   - 확장성 및 안정성 고려사항, 비용 최적화 전략

8. **데이터베이스 아키텍처 설계서** (08-동네물어봐-데이터베이스-아키텍처-설계서.md)
   - PostgreSQL 기반 데이터베이스 설계 및 최적화
   - Redis 캐싱 전략 및 Elasticsearch 검색 시스템
   - 멀티리전 샤딩 및 데이터 동기화 전략

9. **API 아키텍처 설계서** (09-동네물어봐-API-아키텍처-설계서.md)
   - RESTful API 설계 및 GraphQL 통합
   - JWT 기반 인증 시스템 및 API Gateway 구성
   - OpenAPI 3.0 명세 및 버전 관리 전략

10. **보안 아키텍처 설계서** (10-동네물어봐-보안-아키텍처-설계서.md)
    - Zero Trust 보안 모델 구현
    - OWASP Top 10 준수 및 종합 암호화 시스템
    - 데이터 보호 및 개인정보 처리 방침

#### 11-13단계: UI/UX, 비즈니스, 개발 실행 문서 ✅

11. **UI 가이드라인 & 프로토타입 명세서** (11-동네물어봐-UI가이드라인-프로토타입-명세서.md)
    - 디자인 시스템 기본 원칙 (브랜드, 컬러, 타이포그래피)
    - 주요 화면별 프로토타입 명세 (메신저 스타일 인터페이스)
    - 반응형 웹 & 모바일 대응 가이드라인
    - 컴포넌트 라이브러리 구조 (Atomic Design 패턴)

12. **수익화 전략 & 마케팅 계획서** (12-동네물어봐-수익화전략-마케팅계획서.md)
    - 3단계 수익화 전략 (기반구축 → 초기수익화 → 본격수익화)
    - 구체적 수익 모델 (광고, 구독, 커머스, B2B)
    - 초기 사용자 확보 전략 (현지인 우선 → 바이럴 마케팅)
    - 성장 지표 및 목표 (단계별 KPI)

13. **개발 실행계획서** (13-동네물어봐-개발실행계획서.md) ⭐ **최신 완성**
    - SOLID 원칙 기반 개발 가이드라인
    - 10개 Phase로 구분된 단계별 개발 계획
    - 각 단계별 체크리스트 (총 300+ 항목)
    - **환경변수 관리 시스템** (Zod 검증 스키마)
    - **기획 변경 대응 전략 및 롤백 가이드**
    - **Phase별 완료 기준 구체화**
    - **개발 속도 최적화 전략**

### 🎯 주요 설계 결정사항

#### UI/UX 패러다임 전환: 메시지 스타일 인터페이스

**기존**: 전통적인 포럼 스타일 (제목 + 내용 분리)
**변경**: 메신저 스타일 자연스러운 소통 (카카오톡/인스타그램 DM 스타일)

- **질문 형식**: 자동 해시태그 파싱이 포함된 한 줄 메시지 (10-500자)
- **답변 형식**: 실시간 타이핑 표시가 있는 채팅 말풍선 스타일
- **해시태그 시스템**: 자동 분류 기능을 갖춘 자연스러운 통합 (#제주맛집 #서귀포카페)
- **시각적 디자인**: 말풍선, 타임라인 레이아웃, 이모지 지원

#### 제주도 특화 10분 내 초즉시 응답 시스템

**기존**: 2시간 내 첫 답변 목표
**변경**: 10분 내 첫 답변 목표 (제주도 작은 동네 특성 반영)

- **4단계 알림 시스템**: 3초/30초/2분/5분 단계적 확산
- **위치 기반 타겟팅**: 반경 2km → 5km → 제주 전체 순차 알림
- **긴급 모드**: 🚨 진동/사운드 강제 발송으로 즉시성 확보
- **실시간 모니터링**: 10분 초과 시 관리자 알람

#### 3단계 간편 현지인 인증 시스템

**기존**: 복잡한 서류 인증 (참여 장벽 높음)
**변경**: GPS 기반 자동 인증 + 선택적 업그레이드

- **⭐ 1단계**: GPS 패턴 분석으로 자동 "임시 현지인" 인증
- **🏠 2단계**: 지인 추천/SNS 연동으로 "검증된 현지인" 인증
- **👑 3단계**: 서류 기반 "공식 제주도민" 최고 신뢰도 인증

#### 소셜 로그인 통합

- **주요**: 카카오 로그인 (한국 내 가장 높은 채택률)
- **보조**: 네이버 로그인 (제주 거주자 비율 높음)
- **추가**: 구글 로그인 (외국인 관광객)
- **구현**: Passport.js 백엔드 통합과 함께 NextAuth.js

#### 기술 스택 확정

**프론트엔드**:

- Next.js 14 (App Router) + TypeScript
- Tailwind CSS + Framer Motion + Radix UI
- 실시간 기능을 위한 Socket.io Client
- 소셜 로그인을 위한 NextAuth.js

**백엔드**:

- Node.js + Express.js + TypeScript
- PostgreSQL + Prisma ORM
- 실시간 메시징을 위한 Socket.io
- 해시태그 검색 최적화를 위한 Elasticsearch

### 🏗️ **기술 아키텍처 설계 완료 (2025-09-20)**

**총 4개의 포괄적인 아키텍처 설계서가 완성되었습니다:**

- **확장성**: 제주도 1K 사용자부터 전국 1M+ 사용자까지 대응 가능한 설계
- **안정성**: 99.9% 가용성 목표의 고가용성 마이크로서비스 아키텍처
- **보안**: Zero Trust 모델 기반 OWASP Top 10 준수 보안 시스템
- **성능**: 실시간 메시징과 10분 내 응답 목표를 달성하는 최적화된 구조

### 🎉 **모든 설계 문서 완료 (2025-09-20)**

**총 13개의 포괄적인 설계 문서가 모두 완성되었습니다:**

- ✅ **기획 및 비즈니스**: 완전한 비즈니스 모델, 수익화 전략, 마케팅 계획
- ✅ **기술 아키텍처**: 확장 가능하고 안정적인 마이크로서비스 설계
- ✅ **UI/UX 설계**: 메신저 스타일 인터페이스와 브랜드 가이드라인
- ✅ **개발 실행계획**: SOLID 원칙 기반의 체계적인 개발 프로세스

### 🚀 **개발 구현 진행 중!**

#### 현재 상태: **Phase 7 완료, Phase 8 준비**

모든 기획, 설계, 개발계획이 완료되어 **개발 구현이 진행 중**입니다.

#### 완료된 개발 단계 (Phase 1-7) ✅

1. **✅ Phase 1**: 프로젝트 기반 구축 (5개 하위 단계 완료)
   - 개발 환경 설정 (Node.js, pnpm, Git)
   - Next.js 프론트엔드 초기 설정
   - Express.js 백엔드 초기 설정
   - 개발 도구 및 자동화 설정
   - CI/CD 파이프라인 기초 설정

2. **✅ Phase 2**: 인증 시스템 구현 (4개 하위 단계 완료)
   - 인증 아키텍처 설계
   - 소셜 로그인 구현 (카카오, 네이버, 구글)
   - NextAuth.js 프론트엔드 구현
   - 사용자 관리 시스템

3. **✅ Phase 3**: 데이터베이스 설계 및 구현 (3개 하위 단계 완료)
   - 데이터베이스 스키마 설계 (PostgreSQL + Prisma)
   - Prisma ORM 설정
   - 고급 데이터베이스 기능 (캐싱, 검색, 트랜잭션)

4. **✅ Phase 3.5**: 코드 문서화 및 품질 보증 (4개 하위 단계 완료)
   - 코드 주석 및 JSDoc 추가
   - 아키텍처 문서화 (Repository 패턴, SOLID 원칙)
   - 핵심 로직 단위 테스트 (Jest 설정 및 테스트 파일 작성)
   - 에러 핸들링 개선 (커스텀 에러 클래스, 재시도 로직)

5. **✅ Phase 4**: 핵심 API 개발 (4개 하위 단계 완료)
   - 질문 관리 API (CRUD, 검색, 북마크, 신고)
   - 답변 관리 API (CRUD, 상호작용, 채택)
   - 사용자 활동 API (통계, 알림 시스템)
   - API 문서화 및 보안 (OpenAPI, Rate Limiting)

6. **✅ Phase 5**: UI 컴포넌트 라이브러리 (5개 하위 단계 완료)
   - 디자인 시스템 구현 (토큰, Tailwind 커스터마이징)
   - Atomic Design 컴포넌트 (Atoms, Molecules, Organisms)
   - 컴포넌트 문서화 및 테스트 (Storybook, Jest)

7. **✅ Phase 6**: 메인 화면 구현 (5개 하위 단계 완료)
   - 레이아웃 시스템 (Header, Footer, Sidebar, MainLayout)
   - 홈페이지 구현 (HeroSection, RealtimeBanner, PopularQuestions, FeatureCards)
   - 질문 상세 페이지 (QuestionDetail, AnswerSection, QuestionPage)
   - 사용자 프로필 페이지 (UserProfile, ActivityHistory, ProfilePage)
   - 검색 및 필터 페이지 (SearchForm, SearchResults, SearchPage)

8. **✅ Phase 7**: 실시간 기능 구현 (8개 하위 단계 완료) 🎉 **최신 완료**
   - Socket.io 서버 사이드 구현 (TypeScript 타입 정의, 서버 설정, 서비스 분리)
   - Socket.io 클라이언트 사이드 구현 (React 훅, SSR 호환, 자동 재연결)
   - 실시간 알림 시스템 (사용자별 설정, 오프라인 큐, 위치 기반 타겟팅)
   - 타이핑 표시 기능 (실시간 상태, 질문별 관리, 자동 정리)
   - 메시지 스타일 UI (말풍선 디자인, 상태 표시, 반응형)
   - 메시지 상태 관리 (읽음/미읽음, 전송 상태, 오류 처리)
   - 실시간 통계 표시 (라이브 사용자 수, 일일 통계, 위치별 통계)
   - 관리자 모니터링 도구 (시스템 상태, 성능 메트릭, 관리자 알림)

#### 구현된 주요 기능들

- **모노레포 구조**: Turborepo 기반 웹/API/패키지 분리
- **인증 시스템**: NextAuth.js + 소셜 로그인 (카카오, 네이버, 구글)
- **데이터베이스**: PostgreSQL + Prisma ORM + Redis 캐싱
- **Repository 패턴**: SOLID 원칙 기반 데이터 접근 계층
- **에러 핸들링**: 커스텀 에러 클래스 + 재시도 로직 + 로깅
- **검색 시스템**: Elasticsearch 기반 풀텍스트 검색
- **UI 컴포넌트**: Atomic Design 기반 재사용 가능한 컴포넌트 라이브러리
- **메인 화면**: 완전한 레이아웃 시스템과 모든 주요 페이지 구현
- **실시간 시스템**: Socket.io 기반 실시간 통신 및 알림 시스템
- **메시지 인터페이스**: 카카오톡 스타일 말풍선 UI와 타이핑 표시
- **반응형 디자인**: 모바일/데스크톱 완벽 대응
- **접근성**: ARIA 라벨, 키보드 네비게이션, 시맨틱 마크업

#### 현재 진행 상황

- **완료된 Phase**: 1, 2, 3, 3.5, 4, 5, 6, 7 (총 38개 하위 단계)
- **다음 단계**: Phase 8 - 고급 기능 구현
- **코드 품질**: ESLint 에러 0개, TypeScript 컴파일 성공

#### 다음 개발 목표 (Phase 8-10)

1. **Phase 8**: 고급 기능 구현 (해시태그 시스템, 포인트/배지 시스템, AI 자동 분류)
2. **Phase 9**: 테스트 및 최적화 (10분 내 응답 시스템 구현, 성능 최적화)
3. **Phase 10**: 배포 및 운영 (베타 테스트, 초기 시드 사용자 확보)

### 📊 성공 지표 추적

- **개발 속도**: Phase 완료율 (현재 8/10 Phase 완료, 80%)
- **코드 품질**: ESLint 에러 0개, TypeScript 컴파일 성공
- **아키텍처 품질**: SOLID 원칙 준수, Repository 패턴 적용
- **UI/UX 품질**: 반응형 디자인, 접근성 준수
- **실시간 성능**: Socket.io 연결 안정성, 메시지 전송 지연 최소화

### 🎉 Phase 7 완료 성과

#### 구현된 실시간 시스템

- **Socket.io 서버**: TypedServer, SOLID 원칙 기반 서비스 분리
- **Socket.io 클라이언트**: React 훅, SSR 호환, 자동 재연결
- **실시간 알림**: 사용자별 설정, 오프라인 큐, 위치 기반 타겟팅
- **타이핑 표시**: 실시간 상태, 질문별 독립 관리
- **메시지 UI**: 카카오톡 스타일 말풍선, 상태 표시
- **통계 시스템**: 라이브 사용자 수, 일일 통계, 관리자 모니터링

#### 기술적 성과

- **SOLID 원칙 완벽 적용**: 서비스별 단일 책임, 인터페이스 분리
- **타입 안정성**: TypeScript 완전 지원, 컴파일 에러 0개
- **확장성**: Redis 클러스터링, Rate Limiting, 자동 정리 시스템
- **성능 최적화**: 메모리 효율적 관리, 네트워크 최적화
- **에러 처리**: 재연결 로직, 오류 상태 관리, 로깅 시스템

### 🔧 향후 세션을 위한 개발 컨텍스트

- **현재 상태**: Phase 7 완료, Phase 8 준비
- **다음 작업**: 고급 기능 구현 (해시태그 시스템, 포인트/배지 시스템)
- **주요 초점**: AI 자동 분류, 스마트 해시태그, 게임화 요소
- **핵심 경로**: 해시태그 엔진, 포인트 시스템, 배지 시스템
- **품질 기준**: SOLID 원칙 준수, 성능 최적화, 사용자 경험
- **성능 목표**: 해시태그 자동 분류 정확도, 포인트 시스템 실시간 처리
- **제주도 특화**: 10분 내 응답 시스템 기술적 기반 완성
